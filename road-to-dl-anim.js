var eo=function(t){return 1-Math.pow(1-Math.max(0,Math.min(1,t)),3);};
var cl=function(v,a,b){return Math.max(a,Math.min(b,v));};
var lr=function(a,b,t){return a+(b-a)*t;};
function rr(c,x,y,w,h,r,f,s,sw){c.beginPath();c.moveTo(x+r,y);c.lineTo(x+w-r,y);c.quadraticCurveTo(x+w,y,x+w,y+r);c.lineTo(x+w,y+h-r);c.quadraticCurveTo(x+w,y+h,x+w-r,y+h);c.lineTo(x+r,y+h);c.quadraticCurveTo(x,y+h,x,y+h-r);c.lineTo(x,y+r);c.quadraticCurveTo(x,y,x+r,y);c.closePath();if(f){c.fillStyle=f;c.fill();}if(s){c.strokeStyle=s;c.lineWidth=sw||1;c.stroke();}}
function rrp(ctx,x,y,w,h,r){if(ctx.roundRect)ctx.roundRect(x,y,w,h,r);else ctx.rect(x,y,w,h);}
(function(){var cv=document.getElementById('bgc'),ctx=cv.getContext('2d');cv.width=1280;cv.height=720;var pts=[];for(var i=0;i<40;i++)pts.push({x:Math.random()*1280,y:Math.random()*720,vx:(Math.random()-.5)*.25,vy:(Math.random()-.5)*.25,r:Math.random()*1.2+.4});(function loop(){ctx.clearRect(0,0,1280,720);for(var i=0;i<pts.length;i++){var p=pts[i];p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>1280)p.vx*=-1;if(p.y<0||p.y>720)p.vy*=-1;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle='rgba(71,85,105,.5)';ctx.fill();}for(var i=0;i<pts.length;i++){for(var j=i+1;j<pts.length;j++){var dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<110){ctx.beginPath();ctx.strokeStyle='rgba(71,85,105,'+(1-d/110)*.25+')';ctx.lineWidth=.5;ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.stroke();}}}requestAnimationFrame(loop);})();})();
function initArrow(id,col){var cv=document.getElementById(id);if(!cv)return;var ctx=cv.getContext('2d'),W=cv.width,H=cv.height;var pts=[];for(var i=0;i<5;i++)pts.push({t:i/5,s:.0045+Math.random()*.003});(function loop(){ctx.clearRect(0,0,W,H);for(var i=0;i<pts.length;i++){var p=pts[i];p.t+=p.s;if(p.t>1)p.t-=1;var y=20+p.t*130,a=p.t<.12?p.t/.12:p.t>.88?(1-p.t)/.12:1;ctx.beginPath();ctx.arc(W/2,y,2.5,0,Math.PI*2);ctx.fillStyle=col.replace('$',''+(a*.85));ctx.fill();}requestAnimationFrame(loop);})();}
setTimeout(function(){initArrow('ap1','rgba(245,158,11,$)');initArrow('ap2','rgba(168,85,247,$)');},900);
function initP1(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0;var CY=300,RL=['"free money"?','links > 5?','unknown sender?'];function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();function drawMail(cx,cy,sz,a,col){ctx.save();ctx.globalAlpha=a;var w=sz*1.6,h=sz;rr(ctx,cx-w/2,cy-h/2,w,h,4,'rgba(30,41,59,.9)',col,1.5);ctx.beginPath();ctx.moveTo(cx-w/2,cy-h/2);ctx.lineTo(cx,cy+h*.28);ctx.lineTo(cx+w/2,cy-h/2);ctx.strokeStyle=col;ctx.lineWidth=1.5;ctx.stroke();ctx.restore();}(function loop(){ctx.clearRect(0,0,W,H);var n=(frame%CY)/CY,cx=W/2,eY=H*.1,rY=[H*.3,H*.52,H*.74],rW=W*.72,rH=H*.13;var eA=n<.07?eo(n/.07):n>.87?cl(1-(n-.87)/.1,0,1):1;drawMail(cx,eY+(n<.07?lr(-25,0,eo(n/.07)):0),18,eA,'#f59e0b');if(n>.07&&n<.87){ctx.save();ctx.globalAlpha=.2;ctx.strokeStyle='#334155';ctx.lineWidth=1;ctx.setLineDash([3,3]);ctx.beginPath();ctx.moveTo(cx,eY+11);ctx.lineTo(cx,rY[0]-rH/2);ctx.stroke();ctx.setLineDash([]);ctx.restore();}for(var i=0;i<3;i++){var rs=.12+i*.18,isA=n>=rs&&n<rs+.18,isD=n>=rs+.18&&n<.87;var rA=n<rs?0:n<rs+.04?eo((n-rs)/.04):n>.87?cl(1-(n-.87)/.1,0,1):1;if(rA<=0)continue;if(i>0){ctx.save();ctx.globalAlpha=rA*.2;ctx.strokeStyle='#334155';ctx.lineWidth=1;ctx.setLineDash([3,3]);ctx.beginPath();ctx.moveTo(cx,rY[i-1]+rH/2);ctx.lineTo(cx,rY[i]-rH/2);ctx.stroke();ctx.setLineDash([]);ctx.restore();}ctx.save();ctx.globalAlpha=rA;rr(ctx,cx-rW/2,rY[i]-rH/2,rW,rH,6,isA?'rgba(245,158,11,.12)':isD?'rgba(30,41,59,.6)':'rgba(15,23,42,.7)',isA?'#f59e0b':isD?'#334155':'#1e293b',isA?1.5:1);ctx.fillStyle=isA?'#fbbf24':'#64748b';ctx.font=(isA?'600 ':'400 ')+Math.round(W*.037)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(RL[i],cx,rY[i]);if(isD){var rx=cx+rW/2+16;ctx.beginPath();ctx.arc(rx,rY[i],10,0,Math.PI*2);ctx.fillStyle='rgba(34,197,94,.15)';ctx.fill();ctx.strokeStyle='#22c55e';ctx.lineWidth=1.5;ctx.stroke();ctx.fillStyle='#22c55e';ctx.font='bold '+Math.round(W*.042)+'px Inter';ctx.fillText('\u2713',rx,rY[i]+1);}ctx.restore();}if(n>.67&&n<.87){var bA=n<.71?eo((n-.67)/.04):n>.83?cl(1-(n-.83)/.04,0,1):1;ctx.save();ctx.globalAlpha=bA;var g=ctx.createRadialGradient(cx,H*.5,0,cx,H*.5,W*.4);g.addColorStop(0,'rgba(239,68,68,.12)');g.addColorStop(1,'rgba(239,68,68,0)');ctx.fillStyle=g;ctx.fillRect(0,0,W,H);rr(ctx,cx-W*.3,H*.42,W*.6,H*.16,8,'rgba(239,68,68,.15)','#ef4444',2);ctx.fillStyle='#fca5a5';ctx.font='bold '+Math.round(W*.054)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('BLOCKED',cx,H*.5);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
function initP2(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0;var CY=300;function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();var td=[{l:'SPAM',c:'#ef4444'},{l:'HAM',c:'#22c55e'},{l:'SPAM',c:'#ef4444'},{l:'HAM',c:'#22c55e'},{l:'SPAM',c:'#ef4444'},{l:'HAM',c:'#22c55e'}];(function loop(){ctx.clearRect(0,0,W,H);var n=(frame%CY)/CY,cx=W/2,cy=H/2,lx=W*.2,mx=W*.5,rx=W*.8,pulse=Math.sin(frame*.06)*.5+.5;var bW=W*.32,bH=H*.09,bG=H*.025,tH=td.length*(bH+bG)-bG,sY=cy-tH/2;var sN=n<.38?Math.floor(eo(n/.38)*td.length):td.length;for(var i=0;i<sN;i++){var d=td[i],by=sY+i*(bH+bG),bA=i===sN-1&&n<.38?cl(n*td.length/.38-i,0,1):1;ctx.save();ctx.globalAlpha=bA*.88;ctx.fillStyle='rgba(15,23,42,.85)';ctx.strokeStyle=d.c;ctx.lineWidth=1.2;ctx.beginPath();rrp(ctx,lx-bW/2,by,bW,bH,4);ctx.fill();ctx.stroke();ctx.fillStyle=d.c;ctx.beginPath();rrp(ctx,lx-bW/2,by,bW*.07,bH,4);ctx.fill();ctx.font='bold '+Math.round(bH*.55)+'px Montserrat,sans-serif';ctx.textAlign='left';ctx.textBaseline='middle';ctx.fillText(d.l,lx-bW/2+bW*.11,by+bH/2);ctx.restore();}if(n>.06){ctx.save();ctx.globalAlpha=cl((n-.06)/.06,0,1)*.6;ctx.fillStyle='#475569';ctx.font=Math.round(H*.075)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='bottom';ctx.fillText('Training Data',lx,sY-6);ctx.restore();}if(n>.28){var mA=cl((n-.28)/.1,0,1),mW=W*.22,mH=H*.42;ctx.save();ctx.globalAlpha=mA;var grd=ctx.createRadialGradient(mx,cy,0,mx,cy,mW*.9);grd.addColorStop(0,'rgba(168,85,247,'+(.07+pulse*.07)+')');grd.addColorStop(1,'rgba(168,85,247,0)');ctx.fillStyle=grd;ctx.fillRect(mx-mW,cy-mH,mW*2,mH*2);ctx.fillStyle='rgba(12,20,40,.92)';ctx.strokeStyle='#a855f7';ctx.lineWidth=2;ctx.beginPath();rrp(ctx,mx-mW/2,cy-mH/2,mW,mH,10);ctx.fill();ctx.stroke();ctx.fillStyle='#c084fc';ctx.font='bold '+Math.round(mH*.32)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('ML',mx,cy-mH*.1);ctx.fillStyle='#64748b';ctx.font=Math.round(mH*.16)+'px Inter,sans-serif';ctx.fillText('Model',mx,cy+mH*.18);var lP=cl((n-.32)/.3,0,1),nc=Math.floor(lP*8);for(var i=0;i<nc;i++){var a1=i*0.78+frame*.022,a2=a1+1.1+i*.4,r1=mH*(.12+Math.sin(i*1.9)*.1),r2=mH*(.12+Math.cos(i*2.3)*.1);ctx.save();ctx.globalAlpha=mA*.35;ctx.strokeStyle='#c084fc';ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(mx+Math.cos(a1)*r1,cy+Math.sin(a1)*r1*.6);ctx.lineTo(mx+Math.cos(a2)*r2,cy+Math.sin(a2)*r2*.6);ctx.stroke();ctx.restore();}ctx.restore();ctx.save();ctx.globalAlpha=mA*.55;ctx.strokeStyle='#a855f7';ctx.lineWidth=1.5;ctx.setLineDash([5,3]);ctx.beginPath();ctx.moveTo(lx+bW/2+4,cy);ctx.lineTo(mx-mW/2-4,cy);ctx.stroke();ctx.setLineDash([]);ctx.fillStyle='#a855f7';ctx.beginPath();ctx.moveTo(mx-mW/2-4,cy-5);ctx.lineTo(mx-mW/2+5,cy);ctx.lineTo(mx-mW/2-4,cy+5);ctx.closePath();ctx.fill();ctx.restore();}if(n>.46){var rA=cl((n-.46)/.1,0,1),accP=cl((n-.48)/.38,0,1),acc=Math.round(accP*94),mtrH=H*.55,mtrW=W*.07,mtrX=rx-mtrW/2,mtrY=cy-mtrH/2;ctx.save();ctx.globalAlpha=rA;ctx.fillStyle='rgba(15,23,42,.8)';ctx.strokeStyle='#1e293b';ctx.lineWidth=1;ctx.beginPath();rrp(ctx,mtrX,mtrY,mtrW,mtrH,5);ctx.fill();ctx.stroke();if(accP>0){var fH=mtrH*accP,fg=ctx.createLinearGradient(0,mtrY+mtrH,0,mtrY+mtrH-fH);fg.addColorStop(0,'rgba(34,197,94,.9)');fg.addColorStop(1,'rgba(16,185,129,.5)');ctx.fillStyle=fg;ctx.beginPath();rrp(ctx,mtrX,mtrY+mtrH-fH,mtrW,fH,5);ctx.fill();}ctx.fillStyle='#22c55e';ctx.font='bold '+Math.round(H*.1)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='bottom';ctx.fillText(acc+'%',rx,mtrY-4);ctx.fillStyle='#475569';ctx.font=Math.round(H*.07)+'px Inter,sans-serif';ctx.textBaseline='top';ctx.fillText('Accuracy',rx,mtrY+mtrH+6);ctx.strokeStyle='#22c55e';ctx.lineWidth=1.5;ctx.setLineDash([5,3]);ctx.beginPath();ctx.moveTo(mx+W*.11+4,cy);ctx.lineTo(mtrX-4,cy);ctx.stroke();ctx.setLineDash([]);ctx.fillStyle='#22c55e';ctx.beginPath();ctx.moveTo(mtrX-4,cy-5);ctx.lineTo(mtrX+5,cy);ctx.lineTo(mtrX-4,cy+5);ctx.closePath();ctx.fill();ctx.restore();}if(n>.88){var fA=eo(cl((n-.88)/.07,0,1));ctx.save();ctx.globalAlpha=fA;var sg=ctx.createRadialGradient(cx,cy,0,cx,cy,W*.4);sg.addColorStop(0,'rgba(34,197,94,.13)');sg.addColorStop(1,'rgba(34,197,94,0)');ctx.fillStyle=sg;ctx.fillRect(0,0,W,H);ctx.fillStyle='#22c55e';ctx.font='bold '+Math.round(H*.13)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('\u2713 94% Accurate!',cx,cy);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
function initP3(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0;var PASS=110,layers=[4,5,5,4,2],lcols=['#60a5fa','#a78bfa','#818cf8','#6ee7b7','#2dd4bf'],llbls=['Input','Hidden 1','Hidden 2','Hidden 3','Output'];function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();function gN(){var nd=[];for(var l=0;l<layers.length;l++){var lx=W*(.1+l*.2);for(var n=0;n<layers[l];n++){nd.push({l:l,n:n,x:lx,y:H*(.5-(layers[l]-1)*.5*.15)+n*H*.15});}}return nd;}(function loop(){ctx.clearRect(0,0,W,H);var t=(frame%PASS)/PASS,nd=gN(),aL=Math.floor(t*(layers.length+1));for(var i=0;i<nd.length;i++){for(var j=0;j<nd.length;j++){if(nd[j].l!==nd[i].l+1)continue;ctx.save();ctx.globalAlpha=nd[i].l<aL?.18:.05;ctx.strokeStyle=nd[i].l<aL?lcols[nd[i].l]:'#1e293b';ctx.lineWidth=.8;ctx.beginPath();ctx.moveTo(nd[i].x,nd[i].y);ctx.lineTo(nd[j].x,nd[j].y);ctx.stroke();ctx.restore();}}if(aL>0&&aL<layers.length){var sT=(t*(layers.length+1))%1,fL=nd.filter(function(n){return n.l===aL-1;}),tL=nd.filter(function(n){return n.l===aL;});fL.forEach(function(fn){tL.forEach(function(tn){ctx.save();ctx.globalAlpha=.7;ctx.beginPath();ctx.arc(lr(fn.x,tn.x,sT),lr(fn.y,tn.y,sT),2.5,0,Math.PI*2);ctx.fillStyle=lcols[fn.l];ctx.fill();ctx.restore();});});}nd.forEach(function(n){var isA=n.l<aL,isC=n.l===aL;ctx.save();if(isA||isC){ctx.globalAlpha=isA?.15:.25;ctx.beginPath();ctx.arc(n.x,n.y,14,0,Math.PI*2);ctx.fillStyle=lcols[n.l];ctx.fill();}ctx.globalAlpha=isA?.9:isC?.7:.35;ctx.beginPath();ctx.arc(n.x,n.y,8,0,Math.PI*2);ctx.fillStyle=isA||isC?lcols[n.l]:'rgba(30,41,59,.8)';ctx.fill();ctx.strokeStyle=lcols[n.l];ctx.lineWidth=1.5;ctx.stroke();ctx.restore();});for(var l=0;l<layers.length;l++){var lx=W*(.1+l*.2),isA=l<aL;ctx.save();ctx.globalAlpha=isA?.8:.3;ctx.fillStyle=lcols[l];ctx.font=(isA?'600 ':'400 ')+Math.round(W*.026)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='top';ctx.fillText(llbls[l],lx,H*.88);ctx.restore();}if(aL>=layers.length){var oA=cl((t*(layers.length+1)-layers.length)/.5,0,1);ctx.save();ctx.globalAlpha=oA;rr(ctx,W*.76,H*.36,W*.2,H*.28,6,'rgba(20,184,166,.12)','#14b8a6',1.5);ctx.fillStyle='#2dd4bf';ctx.font='bold '+Math.round(W*.032)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('Cat!',W*.86,H*.5);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
(function(){var cards=[document.getElementById('c1'),document.getElementById('c2'),document.getElementById('c3')];var cur=0;function next(){cards.forEach(function(c){c.classList.remove('sp');});cards[cur].classList.add('sp');cur=(cur+1)%cards.length;}next();setInterval(next,4000);})();
window.addEventListener('load',function(){setTimeout(function(){initP1(document.getElementById('cv1'));initP2(document.getElementById('cv2'));initP3(document.getElementById('cv3'));},500);});
